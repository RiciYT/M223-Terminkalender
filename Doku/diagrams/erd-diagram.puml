@startuml
title Entity-Relationship-Diagramm - M223 Terminkalender

entity "reservations" as res {
  * id : BIGINT <<PK>>
  --
  * title : VARCHAR(255)
  * location : VARCHAR(255)
  * room_number : INT [101-105]
  * description : VARCHAR(1000) [10-200]
  * start_time : DATETIME
  * end_time : DATETIME
  * access_type : ENUM(PUBLIC, PRIVATE)
  access_code : VARCHAR(255)
  * public_key : VARCHAR(255) <<UNIQUE>>
  * private_key : VARCHAR(255) <<UNIQUE>>
}

entity "participants" as part {
  * id : BIGINT <<PK>>
  --
  * name : VARCHAR(255) [A-Za-z only]
  * reservation_id : BIGINT <<FK>>
}

res ||--o{ part : "has"

note right of res
  Constraints:
  - room_number: 101-105
  - description: 10-200 chars
  - start_time < end_time
  - start_time in future
  - Unique: (room_number, time_range)
  
  Keys:
  - public_key: read-only access
  - private_key: edit/delete access
end note

note left of part
  Validation:
  - name pattern: ^[A-Za-zÄÖÜäöüß\\s]+$
  - Comma-separated input in form
  - Cascade delete with reservation
end note

@enduml
